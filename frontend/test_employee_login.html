<!DOCTYPE html>
<html>
<head>
  <title>Employee Login Test</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .container { max-width: 500px; margin: 0 auto; }
    input { width: 100%; padding: 10px; margin: 10px 0; }
    button { width: 100%; padding: 10px; background: #0066cc; color: white; border: none; cursor: pointer; }
    .result { margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px; }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Employee Login Test</h1>
    <input type="email" id="email" placeholder="employee@example.com" value="employee@example.com">
    <input type="password" id="password" placeholder="password" value="password">
    <button onclick="testLogin()">Test Login</button>
    <div id="result" class="result" style="display:none;"></div>
  </div>

  <script>
    async function testLogin() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const resultDiv = document.getElementById('result');
      
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = 'Testing...';
      
      try {
        const res = await fetch('http://localhost:5000/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            emailOrId: email,
            password: password,
            role: 'EMPLOYEE'
          })
        });
        
        const data = await res.json();
        
        if (res.ok && data.token) {
          resultDiv.innerHTML = `
            <p class="success">✅ LOGIN SUCCESSFUL!</p>
            <p><strong>Token:</strong> ${data.token.substring(0, 50)}...</p>
            <p><strong>Role:</strong> ${data.role}</p>
            <p><small>You should be redirected to /employee/dashboard</small></p>
          `;
        } else {
          resultDiv.innerHTML = `
            <p class="error">❌ LOGIN FAILED</p>
            <p><strong>Error:</strong> ${data.error || 'Unknown error'}</p>
            <p><strong>Status:</strong> ${res.status}</p>
          `;
        }
      } catch (err) {
        resultDiv.innerHTML = `
          <p class="error">❌ ERROR</p>
          <p>${err.message}</p>
        `;
      }
    }
  </script>
</body>
</html>
